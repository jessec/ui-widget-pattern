var NO_JQUERY={};
(function(g,m,f){if(!("console"in g)){var r=g.console={};r.log=r.warn=r.error=r.debug=function(){}}m===NO_JQUERY&&(m={fn:{},extend:function(){for(var a=arguments[0],b=1,d=arguments.length;b<d;b++){var e=arguments[b],k;for(k in e)a[k]=e[k]}return a}});m.fn.pm=function(){console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])");return this};m.pm=g.pm=function(a){b.send(a)};m.pm.bind=g.pm.bind=function(a,c,d,e,k){b.bind(a,c,d,e,!0===k)};m.pm.unbind=g.pm.unbind=function(a,
c){b.unbind(a,c)};m.pm.origin=g.pm.origin=null;m.pm.poll=g.pm.poll=200;var b={send:function(a){a=m.extend({},b.defaults,a);var c=a.target;if(a.target)if(a.type){var d={data:a.data,type:a.type};a.success&&(d.callback=b._callback(a.success));a.error&&(d.errback=b._callback(a.error));"postMessage"in c&&!a.hash?(b._bind(),c.postMessage(JSON.stringify(d),a.origin||"*")):(b.hash._bind(),b.hash.send(a,d))}else console.warn("postmessage type required");else console.warn("postmessage target window required")},
bind:function(a,c,d,e,k){b._replyBind(a,c,d,e,k)},_replyBind:function(a,c,d,e,k){"postMessage"in g&&!e?b._bind():b.hash._bind();e=b.data("listeners.postmessage");e||(e={},b.data("listeners.postmessage",e));var p=e[a];p||(p=[],e[a]=p);p.push({fn:c,callback:k,origin:d||m.pm.origin})},unbind:function(a,c){var d=b.data("listeners.postmessage");if(d)if(a)if(c){var e=d[a];if(e){for(var k=[],p=0,l=e.length;p<l;p++){var h=e[p];h.fn!==c&&k.push(h)}d[a]=k}}else delete d[a];else for(p in d)delete d[p]},data:function(a,
c){return c===f?b._data[a]:b._data[a]=c},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var a=[],c=0;32>c;c++)a[c]=b._CHARS[0|32*Math.random()];return a.join("")},_callback:function(a){var c=b.data("callbacks.postmessage");c||(c={},b.data("callbacks.postmessage",c));var d=b._random();c[d]=a;return d},_bind:function(){b.data("listening.postmessage")||(g.addEventListener?g.addEventListener("message",b._dispatch,!1):g.attachEvent&&g.attachEvent("onmessage",
b._dispatch),b.data("listening.postmessage",1))},_dispatch:function(a){if("inject-nexttick"!=a.data){try{var c=JSON.parse(a.data)}catch(d){console.warn("postmessage data invalid json: ",d);return}if(c.type){var e=(b.data("callbacks.postmessage")||{})[c.type];if(e)e(c.data);else for(var e=(b.data("listeners.postmessage")||{})[c.type]||[],k=0,p=e.length;k<p;k++){var l=function(k){c.callback&&b.send({target:a.source,data:k,type:c.callback})},h=e[k];if(h.origin&&"*"!==h.origin&&a.origin!==h.origin)console.warn("postmessage message origin mismatch",
a.origin,h.origin),c.errback&&b.send({target:a.source,data:{message:"postmessage origin mismatch",origin:[a.origin,h.origin]},type:c.errback});else try{h.callback?h.fn(c.data,l,a):l(h.fn(c.data,a))}catch(f){if(c.errback)b.send({target:a.source,data:f,type:c.errback});else throw f;}}}else console.warn("postmessage message type required")}},hash:{send:function(a,c){var d=a.target,e=a.url;if(e){var e=b.hash._url(e),k,f=b.hash._url(g.location.href);if(g==d.parent)k="parent";else try{for(var l=0,h=parent.frames.length;l<
h;l++)if(parent.frames[l]==g){k=l;break}}catch(q){k=g.name}null==k?console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list"):(k={"x-requested-with":"postmessage",source:{name:k,url:f},postmessage:c},f="#x-postmessage-id="+b._random(),d.location=e+f+encodeURIComponent(JSON.stringify(k)))}else console.warn("postmessage target window url is required")},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:50,_bind:function(){b.data("polling.postmessage")||
(setInterval(function(){var a=""+g.location.hash,c=b.hash._regex.exec(a);c&&(c=c[1],b.hash._last!==c&&(b.hash._last=c,b.hash._dispatch(a.substring(b.hash._regex_len))))},m.pm.poll||200),b.data("polling.postmessage",1))},_dispatch:function(a){if(a){try{if(a=JSON.parse(decodeURIComponent(a)),!("postmessage"===a["x-requested-with"]&&a.source&&null!=a.source.name&&a.source.url&&a.postmessage))return}catch(c){return}var d=a.postmessage,e=(b.data("callbacks.postmessage")||{})[d.type];if(e)e(d.data);else{var k;
k="parent"===a.source.name?g.parent:g.frames[a.source.name];for(var e=(b.data("listeners.postmessage")||{})[d.type]||[],f=0,l=e.length;f<l;f++){var h=function(c){d.callback&&b.send({target:k,data:c,type:d.callback,hash:!0,url:a.source.url})},q=e[f];if(q.origin){var t=/https?\:\/\/[^\/]*/.exec(a.source.url)[0];if("*"!==q.origin&&t!==q.origin){console.warn("postmessage message origin mismatch",t,q.origin);d.errback&&b.send({target:k,data:{message:"postmessage origin mismatch",origin:[t,q.origin]},type:d.errback,
hash:!0,url:a.source.url});continue}}try{q.callback?q.fn(d.data,h):h(q.fn(d.data))}catch(m){if(d.errback)b.send({target:k,data:m,type:d.errback,hash:!0,url:a.source.url});else throw m;}}}}},_url:function(a){return(""+a).replace(/#.*$/,"")}}};m.extend(b,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})})(this,"undefined"===typeof jQuery?NO_JQUERY:jQuery);"JSON"in window&&window.JSON||(JSON={});
(function(){function g(a){return 10>a?"0"+a:a}function m(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=d[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(b,d){var l,h,g,t,u=a,s,n=d[b];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(b));"function"===typeof e&&(n=e.call(d,b,n));switch(typeof n){case "string":return m(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";a+=c;s=[];if("[object Array]"===Object.prototype.toString.apply(n)){t=n.length;for(l=0;l<t;l+=1)s[l]=f(l,n)||"null";g=0===s.length?"[]":a?"[\n"+a+s.join(",\n"+a)+"\n"+u+"]":"["+s.join(",")+"]";a=u;return g}if(e&&"object"===typeof e)for(t=e.length,l=0;l<t;l+=1)h=e[l],"string"===typeof h&&(g=f(h,n))&&s.push(m(h)+(a?": ":":")+g);else for(h in n)Object.hasOwnProperty.call(n,h)&&(g=f(h,n))&&s.push(m(h)+(a?": ":":")+g);g=0===s.length?"{}":a?"{\n"+a+s.join(",\n"+a)+"\n"+
u+"}":"{"+s.join(",")+"}";a=u;return g}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,c,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,d,g){var h;c=a="";if("number"===typeof g)for(h=0;h<g;h+=1)c+=" ";else"string"===typeof g&&(c=g);if((e=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return f("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,g,f=a[d];if(f&&"object"===typeof f)for(e in f)Object.hasOwnProperty.call(f,e)&&(g=c(f,e),void 0!==g?f[e]=g:delete f[e]);return b.call(a,d,f)}var d;r.lastIndex=0;r.test(a)&&(a=a.replace(r,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();
(function(g,m,f,r){f.SeamlessBase={getParam:function(b,a){a=a||g.location.search;var c=(new RegExp("[?&]"+b+"=([^&#]*)")).exec(a);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},filterText:function(b){return b.replace(/[<>]/g,"")},isEmptyObject:function(b){for(var a in b)return!1;return!0},setStyle:function(b,a){0<a.length&&(a="string"==typeof a?a:a.join(" "),a=f.SeamlessBase.filterText(a),b.styleSheet?b.styleSheet.cssText=a:f(b).html(a))},injectStyles:function(b){var a=f("style#injected-styles");
0<a.length?f.SeamlessBase.setStyle(a[0],b):(a=f(m.createElement("style")).attr({type:"text/css",id:"injected-styles"}),f.SeamlessBase.setStyle(a[0],b),f("head").append(a))}}})(window,document,jQuery);
(function(g,m,f,r){f.SeamlessConnection=function(b,a){this.id=0;this.target=b;this.url=a;this.active=!1;this.queue=[]};f.SeamlessConnection.prototype.send=function(b){this.active&&this.target?(b=b||{},b.hasOwnProperty("data")||(b={data:b}),b.target=this.target,b.url=this.url,b.type=b.type||"seamless_data",b.data=b.data||{},b.data.__id=this.id,f.pm(b)):this.queue.push(b)};f.SeamlessConnection.prototype.receive=function(b,a){"function"===typeof b&&(a=b,b="seamless_data");var c=this;f.pm.bind(b,function(b,
e){return b.__id&&b.__id===c.id?a(b,e):!1})};f.SeamlessConnection.prototype.setActive=function(b){this.active=b;if(0<this.queue.length){for(var a in this.queue)this.send(this.queue[a]);this.queue=[];this.queue.length=0}}})(window,document,jQuery);
(function(g,m,f,r){f.hasOwnProperty("pm")?f.seamless={options:{url:"",container:"body",update:200,allowStyleInjection:!1,requireCookies:!1,cookieFallbackMsg:"Your browser requires this page to be opened in a separate window.",cookieFallbackLinkMsg:"Click Here",cookieFallbackAfterMsg:" to open in a separate window.",onUpdate:null,onConnect:null},connect:function(b){b=b||{};for(var a in b)this.options.hasOwnProperty(a)&&(this.options[a]=b[a]);b=this.options;var c=new f.SeamlessConnection(g.parent,b.url),
d=!1;a=function(a,b,e){d=!0;c.send({type:"seamless_error",data:{msg:a,linkText:b,afterText:e}})};c.setActive(!0);b.requireCookies&&(m.cookie="cookieTest=1",-1===m.cookie.indexOf("cookieTest")&&a(b.cookieFallbackMsg,b.cookieFallbackLinkMsg,b.cookieFallbackAfterMsg));a=f.SeamlessBase.getParam("noiframe").toString();if("1"===a||"true"===a.toLowerCase())c.send({type:"seamless_noiframe",data:{href:g.location.href}});else{var e=!1,k=b.container,p=0,l=0,h=function(){if(!d){l&&clearTimeout(l);var a=f(k).outerHeight(!0);
if(!e&&p!==a){e=!0;a={height:a};if(b.onUpdate)b.onUpdate(a);c.send({type:"seamless_update",data:a,success:function(a){p=a.height;e=!1}})}l=setTimeout(h,b.update)}},q=function(a){d||(a=a||0,c.id||(c.send({type:"seamless_ready",data:{}}),50>a&&setTimeout(function(){q(++a)},200)))};f.pm.bind("seamless_styles",function(a){b.allowStyleInjection&&f.SeamlessBase.injectStyles(a);h()});f.pm.bind("seamless_connect",function(a,d){c.id=a.id;if(b.onConnect)b.onConnect(a);f("html").attr({style:"overflow:hidden;"+
f("body").attr("html"),scroll:"no"});b.allowStyleInjection&&f.SeamlessBase.injectStyles(a.styles);h();return a});q()}return c}}:console.log("You must install the jQuery.pm module to use seamless.js.")})(window,document,jQuery);